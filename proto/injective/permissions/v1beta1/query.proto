syntax = "proto3";
package injective.permissions.v1beta1;

import "gogoproto/gogo.proto";
import "google/api/annotations.proto";
import "cosmos/base/v1beta1/coin.proto";
import "cosmos/base/query/v1beta1/pagination.proto";
import "injective/permissions/v1beta1/params.proto";
import "injective/permissions/v1beta1/genesis.proto";
import "injective/permissions/v1beta1/permissions.proto";

option go_package = "github.com/InjectiveLabs/injective-core/injective-chain/modules/permissions/types";

// Query defines the gRPC querier service.
service Query {
  // Params defines a gRPC query method that returns the permissions module's
  // parameters.
  rpc Params(QueryParamsRequest) returns (QueryParamsResponse) {
    option (google.api.http).get = "/injective/permissions/v1beta1/params";
  }

  // NamespaceDenoms defines a gRPC query method that returns the denoms for
  // which a namespace exists
  rpc NamespaceDenoms(QueryNamespaceDenomsRequest)
      returns (QueryNamespaceDenomsResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/namespace_denoms";
  }

  // Namespaces defines a gRPC query method that returns the permissions
  // module's created namespaces.
  rpc Namespaces(QueryNamespacesRequest) returns (QueryNamespacesResponse) {
    option (google.api.http).get = "/injective/permissions/v1beta1/namespaces";
  }

  // Namespace defines a gRPC query method that returns the permissions
  // module's namespace associated with the provided denom.
  rpc Namespace(QueryNamespaceRequest) returns (QueryNamespaceResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/namespace/{denom}";
  }

  // RolesByActor defines a gRPC query method that returns roles for the actor
  // in the namespace
  rpc RolesByActor(QueryRolesByActorRequest)
      returns (QueryRolesByActorResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/roles_by_actor/{denom}/{actor}";
  }

  // ActorsByRole defines a gRPC query method that returns a namespace's roles
  // associated with the provided actor.
  rpc ActorsByRole(QueryActorsByRoleRequest)
      returns (QueryActorsByRoleResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/actors_by_role/{denom}/{role}";
  }

  // RoleManagers defines a gRPC query method that returns a namespace's role
  // managers
  rpc RoleManagers(QueryRoleManagersRequest)
      returns (QueryRoleManagersResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/role_managers/{denom}";
  }

  // RoleManager defines a gRPC query method that returns the roles a given role
  // manager manages for a given namespace
  rpc RoleManager(QueryRoleManagerRequest) returns (QueryRoleManagerResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/role_manager/{denom}/{manager}";
  }

  // PolicyStatuses defines a gRPC query method that returns a namespace's
  // policy statuses
  rpc PolicyStatuses(QueryPolicyStatusesRequest)
      returns (QueryPolicyStatusesResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/policy_statuses/{denom}";
  }

  // PolicyManagerCapabilities defines a gRPC query method that returns a
  // namespace's policy manager capabilities
  rpc PolicyManagerCapabilities(QueryPolicyManagerCapabilitiesRequest)
      returns (QueryPolicyManagerCapabilitiesResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/policy_manager_capabilities/{denom}";
  }

  // Vouchers defines a gRPC query method for the vouchers for a given denom
  rpc Vouchers(QueryVouchersRequest) returns (QueryVouchersResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/vouchers/{denom}";
  }

  // Voucher defines a gRPC query method for the vouchers for a given denom and
  // address
  rpc Voucher(QueryVoucherRequest) returns (QueryVoucherResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/voucher/{denom}/{address}";
  }

  // Retrieves the entire permissions module's state
  rpc PermissionsModuleState(QueryModuleStateRequest)
      returns (QueryModuleStateResponse) {
    option (google.api.http).get =
        "/injective/permissions/v1beta1/module_state";
  }
}

// QueryParamsRequest is the request type for the Query/Params RPC method.
message QueryParamsRequest {}

// QueryParamsResponse is the response type for the Query/Params RPC method.
message QueryParamsResponse {
  // params defines the parameters of the module.
  Params params = 1 [ (gogoproto.nullable) = false ];
}

// QueryNamespaceDenomsRequest is the request type for the Query/NamespaceDenoms
// RPC method.
message QueryNamespaceDenomsRequest {}

// QueryNamespaceDenomsResponse is the response type for the
// Query/NamespaceDenoms RPC method.
message QueryNamespaceDenomsResponse {
  // List of denoms
  repeated string denoms = 1;
}

// QueryNamespacesRequest is the request type for the Query/Namespaces RPC
// method.
message QueryNamespacesRequest {}

// QueryNamespacesResponse is the response type for the Query/Namespaces
// RPC method.
message QueryNamespacesResponse {
  // List of namespaces
  repeated Namespace namespaces = 1;
}

// QueryNamespaceRequest is the request type for the
// Query/Namespace RPC method.
message QueryNamespaceRequest {
  // The token denom
  string denom = 1;
}

// QueryNamespaceResponse is the response type for the
// Query/NamespaceByDenom RPC method.
message QueryNamespaceResponse {
  // The namespace details
  Namespace namespace = 1;
}

// QueryAddressesByRoleRequest is the request type for the Query/AddressesByRole
// RPC method.
message QueryActorsByRoleRequest {
  // The token denom
  string denom = 1;
  // The role to query actors for
  string role = 2;
}

// QueryAddressesByRoleResponse is the response type for the
// Query/AddressesByRole RPC method.
message QueryActorsByRoleResponse {
  // List of actors' Injective addresses
  repeated string actors = 1;
}

// QueryRolesByActorRequest is the request type for the
// Query/RolesByActor RPC method.
message QueryRolesByActorRequest {
  // The token denom
  string denom = 1;
  // The actor's Injective address
  string actor = 2;
}

// QueryRolesByActorResponse is the response type for the
// Query/RolesByActor RPC method.
message QueryRolesByActorResponse {
  // List of roles
  repeated string roles = 1;
}

// QueryRoleManagersRequest is the request type for the Query/RoleManagers
// RPC method.
message QueryRoleManagersRequest {
  // The token denom
  string denom = 1;
}

// QueryRoleManagersResponse is the response type for the
// Query/RoleManagers RPC method.
message QueryRoleManagersResponse {
  // List of role managers
  repeated RoleManager role_managers = 1;
}

// QueryRoleManagerRequest is the request type for the Query/RoleManager
// RPC method.
message QueryRoleManagerRequest {
  // The token denom
  string denom = 1;
  // The manager Injective address
  string manager = 2;
}

// QueryRoleManagerResponse is the response type for the
// Query/RoleManager RPC method.
message QueryRoleManagerResponse {
  // The role manager details
  RoleManager role_manager = 1;
}

// QueryPolicyStatusesRequest is the request type for the Query/PolicyStatuses
// RPC method.
message QueryPolicyStatusesRequest {
  // The token denom
  string denom = 1;
}

// QueryRoleManagerResponse is the response type for the
// Query/RoleManager RPC method.
message QueryPolicyStatusesResponse {
  // List of policy statuses
  repeated PolicyStatus policy_statuses = 1;
}

// QueryPolicyManagerCapabilitiesRequest is the request type for the
// Query/PolicyManagerCapabilities RPC method.
message QueryPolicyManagerCapabilitiesRequest {
  // The token denom
  string denom = 1;
}

// QueryPolicyManagerCapabilitiesResponse is the response type for the
// Query/PolicyManagerCapabilities RPC method.
message QueryPolicyManagerCapabilitiesResponse {
  // List of policy manager capabilities
  repeated PolicyManagerCapability policy_manager_capabilities = 1;
}

message QueryVouchersRequest {
  // The token denom
  string denom = 1;
}

message QueryVouchersResponse {
  // List of vouchers
  repeated AddressVoucher vouchers = 1;
}

message QueryVoucherRequest {
  // The token denom
  string denom = 1;
  // The Injective address of the receiver
  string address = 2;
}

message QueryVoucherResponse {
  // The voucher amount
  cosmos.base.v1beta1.Coin voucher = 1 [
    (gogoproto.nullable) = false,
    (gogoproto.customtype) = "github.com/cosmos/cosmos-sdk/types.Coin",
    (gogoproto.jsontag) = "voucher,omitempty"
  ];
}

// QueryModuleStateRequest is the request type for the
// Query/PermissionsModuleState RPC method.
message QueryModuleStateRequest {}

// QueryModuleStateResponse is the response type for the
// Query/PermissionsModuleState RPC method.
message QueryModuleStateResponse {
  // The module state
  GenesisState state = 1;
}